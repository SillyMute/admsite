<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin - SillyMute</title>
<style>
body { 
    font-family: 'Quicksand', sans-serif; 
    background: #1e1e2f; 
    color: #f0f0f0; 
    padding: 50px; 
    display: flex;
    flex-direction: column;
    align-items: center;
}
.container {
    width: 100%;
    max-width: 700px;
}
textarea { 
    width: 100%; 
    height: 200px; 
    background: #2b2b3d; 
    color: #f0f0f0; 
    border: none; 
    padding: 10px; 
    border-radius: 8px; 
    font-size: 16px; 
    resize: vertical;
}
button { 
    margin-top: 20px; 
    padding: 10px 20px; 
    font-size: 16px; 
    cursor: pointer; 
    border-radius: 8px; 
    border: none; 
    background: #9f86c0; 
    color: #1e1e2f; 
}
button:hover { background: #b195d1; }
.status {
    margin-top: 15px;
    font-size: 14px;
    color: #ffd700;
}
.buttons {
    display: flex;
    gap: 10px;
}
</style>
</head>
<body>
<div class="container">
    <h1>Edit Info Box Text</h1>
    <textarea id="editor"></textarea>
    <div class="buttons">
        <button id="saveBtn">Save</button>
        <button onclick="window.location.href='https://main.sillymute.pp.ua'">Go to Main Site</button>
    </div>
    <div class="status" id="status"></div>
</div>

<script>
const editor = document.getElementById("editor");
const status = document.getElementById("status");
const saveBtn = document.getElementById("saveBtn");

// Load current text from the API
async function loadText() {
    try {
        const res = await fetch("https://text-api.sillymute.pp.ua/info");
        if (!res.ok) throw new Error("Failed to load current text");
        editor.value = await res.text();
        status.textContent = "Text loaded successfully.";
        status.style.color = "#00ff00";
    } catch(err) {
        status.textContent = "⚠️ " + err.message;
        status.style.color = "#ff4500";
    }
}

// Send updated text to the API
async function saveText() {
    const text = editor.value;
    status.textContent = "Updating...";
    status.style.color = "#ffd700";
    try {
        const res = await fetch("https://text-api.sillymute.pp.ua/update", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ text })
        });
        if(res.ok) {
            status.textContent = "✅ Text updated successfully!";
            status.style.color = "#00ff00";
        } else {
            const msg = await res.text();
            status.textContent = "❌ Update failed: " + msg;
            status.style.color = "#ff4500";
        }
    } catch(err) {
        status.textContent = "❌ Network error: " + err.message;
        status.style.color = "#ff4500";
    }
}

saveBtn.addEventListener("click", saveText);
window.addEventListener("DOMContentLoaded", loadText);
</script>
</body>
</html>
